/*
* videojs-ga - v0.4.1 - 2014-12-03
* Copyright (c) 2014 Michael Bensoussan
* Licensed MIT
*/
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};videojs.plugin("ga",function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;null==b&&(b={}),console.log(7),y=this,d={},this.options()["data-setup"]&&(t=JSON.parse(this.options()["data-setup"]),t.ga&&(d=t.ga)),f=["player_load","video_load","percent_played","start","end","seek","play","pause","resize","volume_change","error","fullscreen"],m=b.eventsToTrack||d.eventsToTrack||f,w=b.percentsPlayedInterval||d.percentsPlayedInterval||10,j=b.eventCategory||d.eventCategory||"Brightcove Player",e=b.eventLabel||d.eventLabel,v=[],F=!1,h=!1,B=A=0,C=!1,k="",l={video_load:"Video Load",percent_played:"Percent played",start:"Media Begin",seek_start:"Seek start",seek_end:"Seek end",play:"Media Play",pause:"Media Pause",error:"Error",fullscreen_exit:"Fullscreen Exited",fullscreen_enter:"Fullscreen Entered",resize:"Resize",volume_change:"Volume Change",player_load:"Player Load",end:"Media Complete"},o=function(a){return b.eventNames&&b.eventNames[a]?b.eventNames[a]:d.eventNames&&d.eventNames[a]?d.eventNames[a]:l[a]?l[a]:a},("players.brightcove.net"===window.location.host||"preview-players.brightcove.net"===window.location.host)&&(H=b.tracker||d.tracker,H&&(!function(a,b,c,d,e,f,g){return a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){return(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",H,"auto"),ga("require","displayfeatures"))),c=/(\s|^)vjs-ad-(playing|loading)(\s|$)/,r=function(a){return c.test(a.el().className)},s=function(){r(y)||(k=e?e:y.mediainfo?y.mediainfo.id+" | "+y.mediainfo.name:this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,""),a.call(m,"player_load")>=0&&D(o("player_load"),!0))},G=function(){var b,c,d,e,f;if(!r(y)){for(b=Math.round(this.currentTime()),c=Math.round(this.duration()),e=Math.round(b/c*100),d=f=0;99>=f;d=f+=w)e>=d&&a.call(v,d)<0&&(a.call(m,"percentsPlayed")>=0&&0!==e&&D(o("percent_played"),!0,d),e>0&&v.push(d));a.call(m,"seek")>=0&&(B=A,A=b,Math.abs(B-A)>1&&(C=!0,D(o("seek_start"),!1,B),D(o("seek_end"),!1,A)))}},g=function(){r(y)||h||(D("end",!0),h=!0)},x=function(){var a;r(y)||(a=Math.round(this.currentTime()),D(o("play"),!0,a),C=!1)},E=function(){return!r(y)&&a.call(m,"start")>=0&&!F?(D(o("start"),!0),F=!0):void 0},u=function(){var a,b;r(y)||(a=Math.round(this.currentTime()),b=Math.round(this.duration()),a===b||C||D(o("pause"),!1,a))},I=function(){var a;a=this.muted()===!0?0:this.volume(),D(o("volume_change"),!1,a)},z=function(){D(o("resize")+" - "+this.width()+"*"+this.height(),!0)},i=function(){var a;a=Math.round(this.currentTime()),D(o("error"),!0,a)},n=function(){var a;a=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?D(o("fullscreen_enter"),!1,a):D(o("fullscreen_enter"),!1,a)},D=function(a,b,c){window.ga?ga("send","event",{eventCategory:j,eventAction:a,eventLabel:k,eventValue:c,nonInteraction:b}):window._gaq?_gaq.push(["_trackEvent",j,a,k,c,b]):console.log("Google Analytics not detected")},a.call(m,"player_load")>=0&&(self!==top?(p=document.referrer+"(iframe)",q=1):(p=window.location.href,q=0),window.ga?ga("send","event",{eventCategory:j,eventAction:o("player_load"),eventLabel:p,eventValue:q,nonInteraction:!1}):window._gaq?_gaq.push(["_trackEvent",j,o("player_load"),p,q,!1]):console.log("Google Analytics not detected")),this.ready(function(){return this.on("loadedmetadata",s),this.on("timeupdate",G),a.call(m,"end")>=0&&this.on("ended",g),a.call(m,"play")>=0&&this.on("play",x),a.call(m,"start")>=0&&this.on("playing",E),a.call(m,"pause")>=0&&this.on("pause",u),a.call(m,"volume_change")>=0&&this.on("volumechange",I),a.call(m,"resize")>=0&&this.on("resize",z),a.call(m,"error")>=0&&this.on("error",i),a.call(m,"fullscreen")>=0?this.on("fullscreenchange",n):void 0})})}).call(this);