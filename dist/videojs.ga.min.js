/*
* videojs-ga - v0.4.1 - 2014-11-30
* Copyright (c) 2014 Michael Bensoussan
* Licensed MIT
*/
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};videojs.plugin("ga",function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;null==b&&(b={}),r=this,c={},this.options()["data-setup"]&&(m=JSON.parse(this.options()["data-setup"]),m.ga&&(c=m.ga)),e=["loaded","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],j=b.eventsToTrack||c.eventsToTrack||e,p=b.percentsPlayedInterval||c.percentsPlayedInterval||10,h=b.eventCategory||c.eventCategory||"Brightcove Player",d=b.eventLabel||c.eventLabel,w=b.sendPageView||c.sendPageView||!1,o=[],u=t=0,v=!1,i="",("players.brightcove.net"===window.location.host||"preview-players.brightcove.net"===window.location.host)&&(z=b.tracker||c.tracker,z&&(!function(a,b,c,d,e,f,g){return a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){return(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",z,"auto"),ga("require","displayfeatures"),w&&(self!==top?ga("send","pageview",{title:" iframe: "+document.referrer}):ga("send","pageview")))),l=function(){i=d?d:r.mediainfo?r.mediainfo.id+" | "+r.mediainfo.name:this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,""),a.call(j,"loadedmetadata")>=0&&x("loadedmetadata",!0)},y=function(){var b,c,d,e,f;for(b=Math.round(this.currentTime()),c=Math.round(this.duration()),e=Math.round(b/c*100),d=f=0;99>=f;d=f+=p)e>=d&&a.call(o,d)<0&&(a.call(j,"start")>=0&&0===d&&e>0?x("start",!0):a.call(j,"percentsPlayed")>=0&&0!==e&&x("percent played",!0,d),e>0&&o.push(d));a.call(j,"seek")>=0&&(u=t,t=b,Math.abs(u-t)>1&&(v=!0,x("seek start",!1,u),x("seek end",!1,t)))},f=function(){x("end",!0)},q=function(){var a;a=Math.round(this.currentTime()),x("play",!0,a),v=!1},n=function(){var a,b;a=Math.round(this.currentTime()),b=Math.round(this.duration()),a===b||v||x("pause",!1,a)},A=function(){var a;a=this.muted()===!0?0:this.volume(),x("volume change",!1,a)},s=function(){x("resize - "+this.width()+"*"+this.height(),!0)},g=function(){var a;a=Math.round(this.currentTime()),x("error",!0,a)},k=function(){var a;a=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?x("enter fullscreen",!1,a):x("exit fullscreen",!1,a)},x=function(a,b,c){window.ga?ga("send","event",{eventCategory:h,eventAction:a,eventLabel:i,eventValue:c,nonInteraction:b}):window._gaq?_gaq.push(["_trackEvent",h,a,i,c,b]):console.log("Google Analytics not detected")},this.ready(function(){return this.on("loadedmetadata",l),this.on("timeupdate",y),a.call(j,"end")>=0&&this.on("ended",f),a.call(j,"play")>=0&&this.on("play",q),a.call(j,"pause")>=0&&this.on("pause",n),a.call(j,"volumeChange")>=0&&this.on("volumechange",A),a.call(j,"resize")>=0&&this.on("resize",s),a.call(j,"error")>=0&&this.on("error",g),a.call(j,"fullscreen")>=0?this.on("fullscreenchange",k):void 0})})}).call(this);